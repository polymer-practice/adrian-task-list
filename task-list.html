<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../task-element/task-element.html">

<dom-module id="task-list">
  <template>
    <style>
      :host {
        display: block;
      }

      .task-list {
        list-style-type: none;
      }
    </style>
    <div class="task-list-container">
      <ul class="task-list">
        <template is="dom-repeat" items="[[taskList]]" sort="sortTask">
          <li><task-element
            key="[[item.id]]"
            done="[[item.done]]"
            canceled="[[item.canceled]]"
            task-description="[[item.title]]"
          ></task-element></li>
        </template>
      </ul>
    </div>
  </template>

  <script>
    class TaskList extends Polymer.Element {
      static get is() { return 'task-list'; }
      static get properties() {
        return {
          taskList: Array
        };
      }

      sortTask(currentValue, prevValue) {
        let heighPrev = prevValue.canceled + (prevValue.done * 2);
        let heighCurr = currentValue.canceled + (currentValue.done * 2);

        return heighCurr - heighPrev;
      }
    }

    window.customElements.define(TaskList.is, TaskList);
  </script>
</dom-module>
